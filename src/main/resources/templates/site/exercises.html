<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>考公知识交流平台-题库</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css"
          crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/global.css}"/>
    <link rel="icon" th:href="@{/img/favicon.ico}" type="image/x-icon"/>
    <link rel="bookmark" th:href="@{/img/favicon.ico}" type="image/x-icon"/>
</head>
<body>
<div class="nk-container">
    <!-- 头部 -->
    <header class="bg-dark sticky-top" th:replace="index::header">
        <div class="container">
            <!-- 导航 -->
            <nav class="navbar navbar-expand-lg navbar-dark">
                <!-- logo -->
                <a class="navbar-brand" href="#"></a>
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <!-- 功能 -->
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item ml-3 btn-group-vertical">
                            <a class="nav-link" href="../index.html">首页</a>
                        </li>
                        <li class="nav-item ml-3 btn-group-vertical">
                            <a class="nav-link position-relative" href="letter.html">消息<span class="badge badge-danger">12</span></a>
                        </li>
                        <li class="nav-item ml-3 btn-group-vertical">
                            <a class="nav-link" href="register.html">注册</a>
                        </li>
                        <li class="nav-item ml-3 btn-group-vertical">
                            <a class="nav-link" href="login.html">登录</a>
                        </li>
                        <li class="nav-item ml-3 btn-group-vertical dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                               data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <img src="http://images.nowcoder.com/head/1t.png" class="rounded-circle"
                                     style="width:30px;"/>
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item text-center" href="profile.html">个人主页</a>
                                <a class="dropdown-item text-center" href="setting.html">账号设置</a>
                                <a class="dropdown-item text-center" href="login.html">退出登录</a>
                                <div class="dropdown-divider"></div>
                                <span class="dropdown-item text-center text-secondary">nowcoder</span>
                            </div>
                        </li>
                    </ul>
                    <!-- 搜索 -->
                    <form class="form-inline my-2 my-lg-0" action="search.html">
                        <input class="form-control mr-sm-2" type="search" aria-label="Search"/>
                        <button class="btn btn-outline-light my-2 my-sm-0" type="submit">搜索</button>
                    </form>
                </div>
            </nav>
        </div>
    </header>

    <div class="main">

        <!--上方-->
        <div style="overflow: hidden;">
            <!--巨幕标签-->
            <div class="jumbotron"
                 style="width: 800px; margin-left: 5%;margin-top: 10px; border-radius: 30px; float: left">
                <h1 class="display-4">&nbsp;&nbsp;fat-cat 题库</h1>
                <p class="lead">&nbsp;&nbsp;^_^欢迎来到fat-cat刷题区！快来一起刷题，一起进步吧~</p>
            </div>

            <!--右侧刷题历史-->
            <div class="card" style="width: 400px; margin-top: 10px; margin-right: 5%; float: right">
                <div class="card-header"><a th:href="@{/exercises/history}" style="text-decoration: none"><h5>
                    &nbsp;练习历史</h5></a></div>
                <img th:src="@{/img/exercises-history.jpg}" class="card-img-top" alt=""
                     style="width: 400px;height: 360px">
            </div>
        </div>

        <!--下方-->
        <div style="overflow: hidden;">
            <!--下方左边题目列表-->
            <div class="panel-group" id="accordion" style="width: 500px; margin-left: 5%; border-radius: 30px; float: left;">
                <!--行测-->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h5 class="panel-title">
                            <!-- 大标题-->
                            <a data-toggle="collapse" data-parent="#accordion"
                               href="#collapseOne" style="text-decoration: none">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                     class="bi bi-caret-right-fill" viewBox="0 0 16 16">
                                    <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
                                </svg>&nbsp;公务员行测
                            </a>
                            <!--设置练习题数的按钮-->
                            <div style="float:right" onclick="openSetting()">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                     class="bi bi-gear-fill" viewBox="0 0 16 16">
                                    <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
                                </svg>
                            </div>
                        </h5>
                    </div>
                    <div id="collapseOne" class="panel-collapse collapse in">
                        <!--隐藏域，保存每组题的数量-->
                        <input type="hidden" id="quesNum1" value="5">
                        <table class="table table-striped panel-body">
                            <tbody>
                            <tr>
                                <th scope="row">言语理解</th>
                                <td>共&nbsp;<i th:text="${questionNumMap.languageNum}">60</i>&nbsp;题</td>
                                <td>
                                    <button class="btn btn-outline-success btn-sm" onclick="startExercise(1)">开始练习</button>
                                </td>
                            </tr>

                            <tr>
                                <th scope="row">数量关系</th>
                                <td>共&nbsp;<i th:text="${questionNumMap.quantityNum}">60</i>&nbsp;题</td>
                                <td>
                                    <button class="btn btn-outline-success btn-sm" onclick="startExercise(2)">开始练习</button>
                                </td>
                            </tr>

                            <tr>
                                <th scope="row">判断推理</th>
                                <td>共&nbsp;<i th:text="${questionNumMap.judgeNum}">60</i>&nbsp;题</td>
                                <td>
                                    <button class="btn btn-outline-success btn-sm" onclick="startExercise(3)">开始练习</button>
                                </td>
                            </tr>

                            <tr>
                                <th scope="row">常识判断</th>
                                <td>共&nbsp;<i th:text="${questionNumMap.commonNum}">60</i>&nbsp;题</td>
                                <td>
                                    <button class="btn btn-outline-success btn-sm" onclick="startExercise(4)">开始练习</button>
                                </td>
                            </tr>

                            </tbody>
                        </table>
                    </div>
                </div>

                <!--申论-->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h5 class="panel-title">
                            <!-- 大标题-->
                            <a data-toggle="collapse" data-parent="#accordion"
                               href="#collapseTwo" style="text-decoration: none">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                     class="bi bi-caret-right-fill" viewBox="0 0 16 16">
                                    <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
                                </svg>&nbsp;公务员申论
                            </a>
                        </h5>
                    </div>
                    <div id="collapseTwo" class="panel-collapse collapse in">
                        <table class="table table-striped panel-body">
                            <tbody>

                            <tr>
                                <th scope="row">摘抄</th>
                                <td>共&nbsp;<i th:text="${questionNumMap.excerptNum}">60</i>&nbsp;题</td>
                                <td>
                                    <a th:href="@{|/exercises/essayList/摘抄|}" style="text-decoration: none;">
                                        <button class="btn btn-outline-success btn-sm">开始练习</button>
                                    </a>
                                </td>
                            </tr>

                            <tr>
                                <th scope="row">概括归纳</th>
                                <td>共&nbsp;<i th:text="${questionNumMap.summarizeNum}">60</i>&nbsp;题</td>
                                <td>
                                    <a th:href="@{|/exercises/essayList/概括归纳|}" style="text-decoration: none;">
                                        <button class="btn btn-outline-success btn-sm">开始练习</button>
                                    </a>
                                </td>
                            </tr>

                            <tr>
                                <th scope="row">分析推导</th>
                                <td>共&nbsp;<i th:text="${questionNumMap.analysisNum}">60</i>&nbsp;题</td>
                                <td>
                                    <a th:href="@{|/exercises/essayList/分析推导|}" style="text-decoration: none;">
                                        <button class="btn btn-outline-success btn-sm">开始练习</button>
                                    </a>
                                </td>
                            </tr>

                            </tbody>
                        </table>
                    </div>
                </div>

                <!--面试-->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h5 class="panel-title">
                            <!-- 大标题-->
                            <a data-toggle="collapse" data-parent="#accordion"
                               href="#collapseThree" style="text-decoration: none">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                     class="bi bi-caret-right-fill" viewBox="0 0 16 16">
                                    <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
                                </svg>&nbsp;公务员面试
                            </a>
                        </h5>
                    </div>
                    <div id="collapseThree" class="panel-collapse collapse in">
                        <table class="table table-striped panel-body">
                            <tbody>
                            <tr>
                                <th scope="row">社会现象</th>
                                <td>共&nbsp;<i th:text="${questionNumMap.socialNum}">60</i>&nbsp;题</td>
                                <td>
                                    <a th:href="@{|/exercises/essayList/社会现象|}" style="text-decoration: none;">
                                        <button class="btn btn-outline-success btn-sm">开始练习</button>
                                    </a>
                                </td>
                            </tr>

                            <tr>
                                <th scope="row">态度观点</th>
                                <td>共&nbsp;<i th:text="${questionNumMap.attitudeNum}">60</i>&nbsp;题</td>
                                <td>
                                    <a th:href="@{|/exercises/essayList/态度观点|}" style="text-decoration: none;">
                                        <button class="btn btn-outline-success btn-sm">开始练习</button>
                                    </a>
                                </td>
                            </tr>

                            <tr>
                                <th scope="row">组织管理</th>
                                <td>共&nbsp;<i th:text="${questionNumMap.organizationNum}">60</i>&nbsp;题</td>
                                <td>
                                    <a th:href="@{|/exercises/essayList/组织管理|}" style="text-decoration: none;">
                                        <button class="btn btn-outline-success btn-sm">开始练习</button>
                                    </a>
                                </td>
                            </tr>

                            <tr>
                                <th scope="row">应急应变</th>
                                <td>共&nbsp;<i th:text="${questionNumMap.emergencyNum}">60</i>&nbsp;题</td>
                                <td>
                                    <a th:href="@{|/exercises/essayList/应急应变|}" style="text-decoration: none;">
                                        <button class="btn btn-outline-success btn-sm">开始练习</button>
                                    </a>
                                </td>
                            </tr>

                            <tr>
                                <th scope="row">人际关系</th>
                                <td>共&nbsp;<i th:text="${questionNumMap.relationshipNum}">60</i>&nbsp;题</td>
                                <td>
                                    <a th:href="@{|/exercises/essayList/人际关系|}" style="text-decoration: none;">
                                        <button class="btn btn-outline-success btn-sm">开始练习</button>
                                    </a>
                                </td>
                            </tr>

                            <tr>
                                <th scope="row">现场模拟</th>
                                <td>共&nbsp;<i th:text="${questionNumMap.simulationNum}">60</i>&nbsp;题</td>
                                <td>
                                    <a th:href="@{|/exercises/essayList/现场模拟|}" style="text-decoration: none;">
                                        <button class="btn btn-outline-success btn-sm">开始练习</button>
                                    </a>
                                </td>
                            </tr>

                            <tr>
                                <th scope="row">无领导小组</th>
                                <td>共&nbsp;<i th:text="${questionNumMap.leaderlessNum}">60</i>&nbsp;题</td>
                                <td>
                                    <a th:href="@{|/exercises/essayList/无领导小组|}" style="text-decoration: none;">
                                        <button class="btn btn-outline-success btn-sm">开始练习</button>
                                    </a>
                                </td>
                            </tr>

                            </tbody>
                        </table>
                    </div>
                </div>

            </div>

            <!--右下试卷区-->
            <div class="card" style="width: 400px; margin-top: 10px; margin-right: 5%; float: right">
                <img th:src="@{/img/paper1.jpg}" class="card-img-top" alt="" style="width: 400px;height: 200px">
                <div class="card-body">
                    <h5 class="card-title">历年试卷</h5>
                    <p class="card-text">包括历年真题及模拟题，快去查看并开始练习吧！</p>
                    <a th:href="@{/exercises/papers}" class="btn btn-primary">去查看~</a>
                </div>
            </div>

        </div>

        <!--设置模态框-->
        <div class="modal" tabindex="-1" id="setting" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">自定义刷题</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <label>每组题的数量：</label>
                        <input id="quesNum" type="number" min="5" max="40" step="1">

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary" onclick="setQuesNum()">确定</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <!-- 尾部 -->
    <footer class="bg-dark" th:replace="index::footer">
        <div class="container">
            <div class="row">
                <!-- 二维码 -->
                <div class="col-4 qrcode">
                    <img src="https://uploadfiles.nowcoder.com/app/app_download.png" class="img-thumbnail"
                         style="width:136px;"/>
                </div>
                <!-- 公司信息 -->
                <div class="col-8 detail-info">
                    <div class="row">
                        <div class="col">
                            <ul class="nav">
                                <li class="nav-item">
                                    <a class="nav-link text-light" href="#">关于我们</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-light" href="#">加入我们</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-light" href="#">意见反馈</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-light" href="#">企业服务</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-light" href="#">联系我们</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-light" href="#">免责声明</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-light" href="#">友情链接</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <ul class="nav btn-group-vertical company-info">
                                <li class="nav-item text-white-50">
                                    公司地址：北京市朝阳区大屯路东金泉时代3-2708北京牛客科技有限公司
                                </li>
                                <li class="nav-item text-white-50">
                                    联系方式：010-60728802(电话)&nbsp;&nbsp;&nbsp;&nbsp;admin@nowcoder.com
                                </li>
                                <li class="nav-item text-white-50">
                                    牛客科技©2018 All rights reserved
                                </li>
                                <li class="nav-item text-white-50">
                                    京ICP备14055008号-4 &nbsp;&nbsp;&nbsp;&nbsp;
                                    <img src="http://static.nowcoder.com/company/images/res/ghs.png"
                                         style="width:18px;"/>
                                    京公网安备 11010502036488号
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

</div>

<script>
    //设置要练习的题目次数
    function openSetting() {
        $("#setting").modal({
            backdrop: "static"
        });
    }

    //设置每组题的数量
    function setQuesNum() {
        var num = $("#quesNum").val();
        $("#quesNum1").val(num);
        $("#setting").modal('hide');
    }

    function startExercise(i) {
        let num = document.getElementById("quesNum1").value;
        if(i === 1) {
            //发送ajax请求，生成试卷、userPaper，并跳转到答题页面
            sendPost(num, '言语理解');
        } else if(i === 2) {
            sendPost(num, '数量关系');
        } else if(i === 3) {
            sendPost(num, '判断推理');
        } else if(i === 4) {
            sendPost(num, '常识判断');
        }
    }

    function sendPost(num, cateName) {
        // let postData = {"num": num, "cateName" : cateName};
        // $.ajax({
        //     type: 'POST',
        //     url: CONTEXT_PATH + '/exercises/doQuestion',
        //     contentType: "application/json;charset=utf-8",
        //     data: JSON.stringify(postData),
        //     dataType: 'json',
        //     success: function (data) {
        //         if(data.code === 0) {
        //             //转到答题页面
        //             let paperId = data.object;
        //             window.location.href = CONTEXT_PATH + '/exercises/paper/' + paperId;
        //         } else {
        //             alert(data.msg);
        //         }
        //     },
        //     error: function () {
        //         alert('error');
        //     }
        // })

        $.post(
            CONTEXT_PATH + '/exercises/doQuestion',
            {"num": num, "cateName" : cateName},
            function (data) {
                data = $.parseJSON(data);
                if(data.code === 0) {
                    //转到答题页面
                    let paperId = data.object;
                    window.location.href = CONTEXT_PATH + '/exercises/paper/' + paperId;
                } else {
                    alert(data.msg);
                }
            }
        );
    }

</script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        crossorigin="anonymous"></script>
<script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js" crossorigin="anonymous"></script>
<script th:src="@{/js/global.js}"></script>
</body>
</html>